(()=>{var e={};e.id=913,e.ids=[913],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29563:(e,r,s)=>{"use strict";s.d(r,{BT:()=>d,Wu:()=>l,ZB:()=>c,Zp:()=>n,aR:()=>i,wL:()=>u});var t=s(13486),o=s(60159),a=s(26518);let n=o.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));n.displayName="Card";let i=o.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...r}));i.displayName="CardHeader";let c=o.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));c.displayName="CardTitle";let d=o.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",e),...r}));d.displayName="CardDescription";let l=o.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",e),...r}));l.displayName="CardContent";let u=o.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",e),...r}));u.displayName="CardFooter"},33873:e=>{"use strict";e.exports=require("path")},34259:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>m});var t=s(13486),o=s(60159),a=s(77615),n=s(74941),i=s(29563),c=s(70358);let d=(0,c.createServerReference)("40da01a30611a29b7e9490da5e21058ca9c0b3a71d",c.callServer,void 0,c.findSourceMapURL,"fetchTestDataForUser"),l=(0,c.createServerReference)("40f6fd62d6595782977611036b823af627c3c32010",c.callServer,void 0,c.findSourceMapURL,"addMockStroopSessionForUser"),u=(0,c.createServerReference)("0047ee621e8a09b5259a9ed3380a278a24199a2bc7",c.callServer,void 0,c.findSourceMapURL,"testAdminSDKConnection");var p=s(16353);function m(){let{user:e,loading:r}=(0,a.A)(),{toast:s}=(0,p.dj)(),[c,m]=(0,o.useState)(null),[f,h]=(0,o.useState)(null),[g,x]=(0,o.useState)(!1),[b,S]=(0,o.useState)(null),[v,w]=(0,o.useState)(!1),[y,A]=(0,o.useState)(null),[M,N]=(0,o.useState)(!1),j=async()=>{if(!e){S("You must be logged in to fetch data."),h(null);return}x(!0),S(null),h(null);try{let r=await d(e.uid);if(r.success&&r.data)h(r.data),S(null);else{let e="string"==typeof r.error?r.error:"Failed to fetch data.";S(e),h(null)}}catch(e){S(e.message||"An unexpected error occurred."),h(null)}x(!1)},D=async()=>{if(!e){s({title:"Authentication Required",description:"Please log in to add mock data.",variant:"destructive"});return}w(!0),S(null);try{let r=await l(e.uid);if(r.success)s({title:"Mock Data Added",description:`Session ID: ${r.sessionId} created for user ${e.uid}. Refreshing data...`}),await j();else{let e="string"==typeof r.error?r.error:r.error?.message||"An unknown error occurred while adding mock data.";S(e),s({title:"Failed to Add Mock Data",description:e,variant:"destructive"})}}catch(r){let e=r.message||"An unexpected error occurred while adding mock data.";S(e),s({title:"Error Adding Mock Data",description:e,variant:"destructive"})}w(!1)},k=async()=>{N(!0),A(null);try{let e=await u();A(`Success: ${e.success}. Message: ${e.message}${e.data?` Details: ${JSON.stringify(e.data)}`:""}`)}catch(e){A(`Test failed: ${e.message||"Unknown error"}`)}N(!1)};return(0,t.jsx)("main",{className:"flex flex-1 flex-col items-center justify-center p-4 sm:p-6 md:p-8",children:(0,t.jsxs)(i.Zp,{className:"w-full max-w-md shadow-xl",children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{className:"text-2xl font-semibold text-center text-primary",children:"Auth & Data Test Page (Hosting)"}),(0,t.jsx)(i.BT,{className:"text-center",children:"Test authentication and user-specific data fetching."})]}),(0,t.jsxs)(i.Wu,{className:"flex flex-col items-center space-y-6",children:[(0,t.jsx)(n.$,{onClick:()=>{r?m("Checking authentication status..."):e?m(`User ID: ${e.uid}`):m("Not Logged In")},disabled:r,className:"w-full",children:r?"Loading Auth...":"Show User Status"}),c&&(0,t.jsx)("div",{className:"mt-4 p-3 bg-muted rounded-md text-center w-full",children:(0,t.jsx)("p",{className:"text-sm font-medium text-foreground",children:c})}),(0,t.jsx)(n.$,{onClick:k,disabled:M,variant:"secondary",className:"w-full",children:M?"Testing Admin SDK...":"Test Admin SDK Connection"}),y&&(0,t.jsx)("div",{className:`mt-2 p-2 rounded-md text-xs w-full text-center ${y.startsWith("Success: true")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:(0,t.jsx)("pre",{className:"whitespace-pre-wrap",children:y})}),(0,t.jsx)(n.$,{onClick:j,disabled:r||!e||g,className:"w-full",children:g?"Fetching Data...":"Fetch My Stroop Data (Hosting Action)"}),(0,t.jsx)(n.$,{onClick:D,disabled:r||!e||v||g,variant:"outline",className:"w-full",children:v?"Adding Mock Data...":"Add Mock Session Data"}),g&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading data..."}),b&&!g&&(0,t.jsx)("div",{className:"mt-4 p-3 bg-destructive/10 rounded-md text-center w-full",children:(0,t.jsx)("p",{className:"text-sm font-medium text-destructive",children:b})}),f&&!g&&(0,t.jsxs)(i.Zp,{className:"mt-4 w-full",children:[(0,t.jsx)(i.aR,{children:(0,t.jsxs)(i.ZB,{className:"text-lg",children:["Fetched Stroop Sessions (",f.length,")"]})}),(0,t.jsx)(i.Wu,{children:f.length>0?(0,t.jsx)("ul",{className:"list-disc pl-5 text-sm",children:f.map(e=>(0,t.jsxs)("li",{children:["ID: ",e.id.substring(0,8),"... - Score (R1): ",e.round1Score??"N/A"]},e.id))}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No sessions found for this user."})})]})]})]})})}},34631:e=>{"use strict";e.exports=require("tls")},35304:(e,r,s)=>{Promise.resolve().then(s.bind(s,34259))},37366:e=>{"use strict";e.exports=require("dns")},48456:(e,r,s)=>{Promise.resolve().then(s.bind(s,81413))},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},74203:(e,r,s)=>{"use strict";s.r(r),s.d(r,{"0047ee621e8a09b5259a9ed3380a278a24199a2bc7":()=>g,"40da01a30611a29b7e9490da5e21058ca9c0b3a71d":()=>f,"40e31714ebf5e5a9b6e76a0e7550d2f3c51dd7b08a":()=>m,"40f6fd62d6595782977611036b823af627c3c32010":()=>h});var t=s(3742);s(93200);let o=require("firebase-admin");var a=s.n(o);let n=null,i=null,c=null,d=null;async function l(){if(!n||!i||c){if(c)throw c;return d||(d=(async()=>{console.log("[admin.ts] Attempting to initialize Firebase Admin SDK...");try{a().apps.length?(n=a().app(),console.log("[admin.ts] Using existing Firebase Admin app.")):(console.log("[admin.ts] No existing admin apps. Calling admin.initializeApp()..."),n=a().initializeApp()),i=n.firestore(),c=null,console.log("[admin.ts] Firebase Admin SDK initialized successfully.")}catch(e){throw console.error("[admin.ts] CRITICAL: Firebase Admin SDK initialization failed:",e.message,e.code),e.stack&&console.error("[admin.ts] Stack:",e.stack),c=e,e}finally{d=null}})())}}async function u(){if((!i||c)&&await l(),c)throw c;if(!i)throw console.error("[admin.ts] Admin DB instance is null after initialization attempt in getAdminDb."),Error("Firebase Admin SDK Firestore instance is not available after initialization.");return i}var p=s(92305);async function m(e){if(console.log("[firebase/hosting/src/app/actions.ts] fetchUserSessions server action hit. Received userId:",e),!e)return console.error("[firebase/hosting/src/app/actions.ts] fetchUserSessions: No userId provided."),{success:!1,error:"User not authenticated or userId not provided for fetchUserSessions."};try{let r=await (0,p.getUserStroopSessions)(e);return console.log("[firebase/hosting/src/app/actions.ts] getUserStroopSessions result from service (for fetchUserSessions):",r.success,r.data?.length,r.error),r}catch(e){return console.error("[firebase/hosting/src/app/actions.ts] Error in fetchUserSessions calling getUserStroopSessions:",e),{success:!1,error:"string"==typeof e.message?e.message:"An unexpected server error occurred in fetchUserSessions."}}}async function f(e){if(console.log("[firebase/hosting/src/app/actions.ts] fetchTestDataForUser server action hit. Received userId:",e),!e)return console.error("[firebase/hosting/src/app/actions.ts] fetchTestDataForUser: No userId provided."),{success:!1,error:"User not authenticated or userId not provided for fetchTestDataForUser."};try{let r=await (0,p.getUserStroopSessions)(e);return console.log("[firebase/hosting/src/app/actions.ts] getUserStroopSessions result from service (for fetchTestDataForUser):",r.success,r.data?.length,r.error),r}catch(e){return console.error("[firebase/hosting/src/app/actions.ts] Error in fetchTestDataForUser calling getUserStroopSessions:",e),{success:!1,error:"string"==typeof e.message?e.message:"An unexpected server error occurred in fetchTestDataForUser."}}}async function h(e){if(console.log("[firebase/hosting/src/app/actions.ts] addMockStroopSessionForUser server action hit. Received userId:",e),!e)return console.error("[firebase/hosting/src/app/actions.ts] addMockStroopSessionForUser: No userId provided."),{success:!1,error:"User not authenticated or userId not provided."};let r={timestamp:new Date,round1Id:"wordMatch",round1Title:"Mock Round 1: Match Word Meaning",round1Score:Math.floor(18*Math.random())+7,round1Trials:25+Math.floor(6*Math.random()),round1AverageResponseTimeSeconds:parseFloat((1.2*Math.random()+.6).toFixed(2)),round2Id:"colorMatch",round2Title:"Mock Round 2: Match Font Color",round2Score:Math.floor(15*Math.random())+5,round2Trials:20+Math.floor(6*Math.random()),round2AverageResponseTimeSeconds:parseFloat((1.8*Math.random()+.8).toFixed(2)),overallAccuracy:Math.random(),totalGameTimeSeconds:Math.floor(60*Math.random())+120};try{let s=await (0,p.saveStroopSession)(e,r);return s.success?console.log(`[firebase/hosting/src/app/actions.ts] Mock session ${s.sessionId} added for user ${e}`):console.error(`[firebase/hosting/src/app/actions.ts] Failed to add mock session for user ${e}:`,s.error),s}catch(r){return console.error(`[firebase/hosting/src/app/actions.ts] Error in addMockStroopSessionForUser calling saveStroopSession for user ${e}:`,r),{success:!1,error:"string"==typeof r.message?r.message:"An unexpected server error occurred."}}}async function g(){console.log("[actions.ts] testAdminSDKConnection server action hit.");try{let e=(await u()).collection("adminSdkTestCollection").doc("adminSdkTestDocument");return await e.get(),console.log("[actions.ts] Admin SDK connection test: Successfully performed a Firestore get operation with non-reserved names."),{success:!0,message:"Admin SDK connected and performed a test Firestore read successfully."}}catch(r){console.error("[actions.ts] Admin SDK connection test FAILED:"),console.error(`  Message: ${r.message}`),r.code&&console.error(`  Code: ${r.code}`);let e="Admin SDK connection test failed.";return r.message&&(e+=` Server Message: ${r.message}`),r.code&&(e+=` (Code: ${r.code})`),{success:!1,error:e}}}(0,s(77256).D)([m,f,h,g]),(0,t.A)(m,"40e31714ebf5e5a9b6e76a0e7550d2f3c51dd7b08a",null),(0,t.A)(f,"40da01a30611a29b7e9490da5e21058ca9c0b3a71d",null),(0,t.A)(h,"40f6fd62d6595782977611036b823af627c3c32010",null),(0,t.A)(g,"0047ee621e8a09b5259a9ed3380a278a24199a2bc7",null)},79551:e=>{"use strict";e.exports=require("url")},81413:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/firebase/hosting/src/app/test-page/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/firebase/hosting/src/app/test-page/page.tsx","default")},81630:e=>{"use strict";e.exports=require("http")},81812:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>l,routeModule:()=>p,tree:()=>d});var t=s(24332),o=s(48819),a=s(67851),n=s.n(a),i=s(97540),c={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(r,c);let d={children:["",{children:["test-page",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,81413)),"/home/user/studio/firebase/hosting/src/app/test-page/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,20685)),"/home/user/studio/firebase/hosting/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,92341,23)),"next/dist/client/components/unauthorized-error"]}]}.children,l=["/home/user/studio/firebase/hosting/src/app/test-page/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/test-page/page",pathname:"/test-page",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},91645:e=>{"use strict";e.exports=require("net")},92305:()=>{throw Error("Module build failed (from ../../node_modules/next/dist/build/webpack/loaders/next-swc-loader.js):\nError:   \x1b[31mx\x1b[0m Expression expected\n    ,-[\x1b[36;1;4m/home/user/studio/firebase/hosting/src/lib/firebase/firestore-service.ts\x1b[0m:65:1]\n \x1b[2m62\x1b[0m |   userId: string\n \x1b[2m63\x1b[0m | ): Promise<{ success: boolean; data?: FetchedStroopSession[]; error?: string }> {\n \x1b[2m64\x1b[0m |   console.log('[firestore-service - admin] getUserStroopSessions called for userId:', userId);\n \x1b[2m65\x1b[0m | ): Promise<{ success: boolean; data?: FetchedStroopSession[]; error?: string }> {\n    : \x1b[35;1m^\x1b[0m\n \x1b[2m66\x1b[0m |   console.log('[firestore-service - admin] getUserStroopSessions called for userId:', userId);\n \x1b[2m67\x1b[0m |   if (!userId) {\n \x1b[2m68\x1b[0m |     console.error('[firestore-service - admin] User ID is required to fetch sessions.');\n    `----\n\n\nCaused by:\n    Syntax Error")},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[384,337,997],()=>s(81812));module.exports=t})();